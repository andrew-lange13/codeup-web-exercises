<!doctype html>
<html lang="en>
<head>
    <meta charset=" UTF-8">
<meta name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<!--    API Key-->
<script src="js/keys.js"></script>
<!--    JQuery-->
<script src="js/jquery-2.2.4.js"></script>
<!--   Bootstrap5-->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<title>Weather Map</title>
</head>
<body class="bg-dark">
<!--weather container-->
<nav class="navbar navbar-dark bg-primary mb-5">
    <div class="container-fluid">
        <a class="navbar-brand text-dark">Weather App</a>
        <form class="d-flex">
            <input class="form-control me-2 bg-dark" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-primary bg-dark" type="submit">Search</button>
        </form>
    </div>
</nav>
<main class="container-fluid">
    <div class="row" id="weather"></div>

</main>


<script>
    'use strict'
    $(function () {
        // API Key Variable
        const key = WEATHER_MAP_KEY
        // API Call that logs the JSON Object for Abilene weather by lat/long
        $.get("https://api.openweathermap.org/data/2.5/onecall", {
            APPID: key,
            lat: 32.448734,
            lon: -99.733147,
            units: "imperial",
            exclude: "current,minutely,hourly,alerts"
        }).done(function (data) {
            console.log(data);
            // Create variable that will get passed to HTML
            let weatherData = "";
            // Shorten array from 8 to 5 days
            let dataSliced = data.daily.slice(0,5);
            console.log(dataSliced);
            // Start forEach loop
            $.each(dataSliced, function (i) {
                // console.log(data.daily[i].dt)
                // Make date readable
                let day = new Date(data.daily[i].dt * 1000).toLocaleDateString("en", {
                    weekday: "long"
                })
                weatherData += "<div class='col'>" +
                    "<div class='card bg-secondary'>" +
                    "<h3>" + day + "</h3>" +
                    "<ul class='list-group list-group-flush'>" +
                    "<li class='list-group-item-dark bg-secondary list-unstyled'>" + "Low: " + data.daily[i].temp.min + "</li>" +
                    "<li class='list-group-item-dark bg-secondary list-unstyled'>" + "High: " + data.daily[i].temp.max + "</li>" +
                    "</ul>" +
                    "</div>" +
                    "</div>"
            })
            // console.log(weatherData);
            $(".row").html(weatherData)
        })
    })
</script>


<!--Bootstrap JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
</body>
</html>
